import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test105"

    def get_gen_file(self):
        return "{}/test105.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 58:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00004406,
2,{},E00004492,
3,{},E00004402,
4,{},E00004425,
5,{},E00004499,
6,{},E00004490,
7,{},E00004417,
8,{},E00004416,
9,{},E00004487,
10,{},E00004495,
11,{},E00004413,
12,{},E00004501,
13,{},E00004502,
14,{},E00004408,
15,{},E00004507,
16,{},E00004505,
17,{},E00004412,
18,{},E00004486,
19,{},E00004491,
20,{},E00004503,
21,{},E00004482,
22,{},E00004493,
23,{},E00004403,
24,{},E00004508,
25,{},E00004409,
26,{},E00004422,
27,{},E00004419,
28,{},E00004496,
29,{},E00004411,
30,{},E00004506,
31,{},E00004510,
32,{},E00004414,
33,{},E00004427,
34,{},E00004511,
35,{},E00004423,
36,{},E00004489,
37,{},E00004428,
38,{},E00004421,
39,{},E00004497,
40,{},E00004429,
41,{},E00004426,
42,{},E00004407,
43,{},E00004494,
44,{},E00004420,
45,{},E00004504,
46,{},E00004498,
47,{},E00004430,
48,{},E00004509,
49,{},E00004404,
50,{},E00004401,
51,{},E00004405,
52,{},E00004517,
53,{},E00004410,
54,{},E00004415,
55,{},E00004418,
56,{},E00004424,
57,{},E00004481,
58,{},E00004500,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00004406","E00004492","E00004402","E00004425","E00004499","E00004490","E00004417","E00004416","E00004487","E00004495","E00004413","E00004501","E00004502","E00004408","E00004507","E00004505","E00004412","E00004486","E00004491","E00004503","E00004482","E00004493","E00004403","E00004508","E00004409","E00004422","E00004419","E00004496","E00004411","E00004506","E00004510","E00004414","E00004427","E00004511","E00004423","E00004489","E00004428","E00004421","E00004497","E00004429","E00004426","E00004407","E00004494","E00004420","E00004504","E00004498","E00004430","E00004509","E00004404","E00004401","E00004405","E00004517","E00004410","E00004415","E00004418","E00004424","E00004481","E00004500"], [0.0 for i in range(0,58)], {"E00004406":"1","E00004492":"2","E00004402":"3","E00004425":"4","E00004499":"5","E00004490":"6","E00004417":"7","E00004416":"8","E00004487":"9","E00004495":"10","E00004413":"11","E00004501":"12","E00004502":"13","E00004408":"14","E00004507":"15","E00004505":"16","E00004412":"17","E00004486":"18","E00004491":"19","E00004503":"20","E00004482":"21","E00004493":"22","E00004403":"23","E00004508":"24","E00004409":"25","E00004422":"26","E00004419":"27","E00004496":"28","E00004411":"29","E00004506":"30","E00004510":"31","E00004414":"32","E00004427":"33","E00004511":"34","E00004423":"35","E00004489":"36","E00004428":"37","E00004421":"38","E00004497":"39","E00004429":"40","E00004426":"41","E00004407":"42","E00004494":"43","E00004420":"44","E00004504":"45","E00004498":"46","E00004430":"47","E00004509":"48","E00004404":"49","E00004401":"50","E00004405":"51","E00004517":"52","E00004410":"53","E00004415":"54","E00004418":"55","E00004424":"56","E00004481":"57","E00004500":"58"})
