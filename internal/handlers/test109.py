import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test109"

    def get_gen_file(self):
        return "{}/test109.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 49:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00003539,
2,{},E00003532,
3,{},E00003538,
4,{},E00003497,
5,{},E00003855,
6,{},E00003888,
7,{},E00003847,
8,{},E00003535,
9,{},E00166618,
10,{},E00003954,
11,{},E00003570,
12,{},E00003956,
13,{},E00166616,
14,{},E00003870,
15,{},E00003872,
16,{},E00003866,
17,{},E00003849,
18,{},E00003569,
19,{},E00003851,
20,{},E00003850,
21,{},E00003568,
22,{},E00003846,
23,{},E00003852,
24,{},E00003989,
25,{},E00003533,
26,{},E00003546,
27,{},E00003962,
28,{},E00003845,
29,{},E00003853,
30,{},E00003527,
31,{},E00003536,
32,{},E00003500,
33,{},E00003498,
34,{},E00003534,
35,{},E00003868,
36,{},E00003859,
37,{},E00003959,
38,{},E00003952,
39,{},E00003958,
40,{},E00003953,
41,{},E00003854,
42,{},E00003961,
43,{},E00003844,
44,{},E00003862,
45,{},E00003525,
46,{},E00003531,
47,{},E00003537,
48,{},E00003867,
49,{},E00003499,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00003539","E00003532","E00003538","E00003497","E00003855","E00003888","E00003847","E00003535","E00166618","E00003954","E00003570","E00003956","E00166616","E00003870","E00003872","E00003866","E00003849","E00003569","E00003851","E00003850","E00003568","E00003846","E00003852","E00003989","E00003533","E00003546","E00003962","E00003845","E00003853","E00003527","E00003536","E00003500","E00003498","E00003534","E00003868","E00003859","E00003959","E00003952","E00003958","E00003953","E00003854","E00003961","E00003844","E00003862","E00003525","E00003531","E00003537","E00003867","E00003499"], [0.0 for i in range(0,49)], {"E00003539":"1","E00003532":"2","E00003538":"3","E00003497":"4","E00003855":"5","E00003888":"6","E00003847":"7","E00003535":"8","E00166618":"9","E00003954":"10","E00003570":"11","E00003956":"12","E00166616":"13","E00003870":"14","E00003872":"15","E00003866":"16","E00003849":"17","E00003569":"18","E00003851":"19","E00003850":"20","E00003568":"21","E00003846":"22","E00003852":"23","E00003989":"24","E00003533":"25","E00003546":"26","E00003962":"27","E00003845":"28","E00003853":"29","E00003527":"30","E00003536":"31","E00003500":"32","E00003498":"33","E00003534":"34","E00003868":"35","E00003859":"36","E00003959":"37","E00003952":"38","E00003958":"39","E00003953":"40","E00003854":"41","E00003961":"42","E00003844":"43","E00003862":"44","E00003525":"45","E00003531":"46","E00003537":"47","E00003867":"48","E00003499":"49"})
