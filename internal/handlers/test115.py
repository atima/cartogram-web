import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test115"

    def get_gen_file(self):
        return "{}/test115.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 43:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00009606,
2,{},E00009601,
3,{},E00009581,
4,{},E00009695,
5,{},E00009717,
6,{},E00009689,
7,{},E00009639,
8,{},E00009696,
9,{},E00009609,
10,{},E00009605,
11,{},E00009691,
12,{},E00009697,
13,{},E00009642,
14,{},E00009791,
15,{},E00009694,
16,{},E00009582,
17,{},E00009612,
18,{},E00009793,
19,{},E00009692,
20,{},E00009693,
21,{},E00009790,
22,{},E00009637,
23,{},E00009710,
24,{},E00009643,
25,{},E00009611,
26,{},E00009613,
27,{},E00009683,
28,{},E00009584,
29,{},E00009761,
30,{},E00009698,
31,{},E00009712,
32,{},E00009602,
33,{},E00009610,
34,{},E00009640,
35,{},E00009792,
36,{},E00009600,
37,{},E00009583,
38,{},E00009687,
39,{},E00009762,
40,{},E00009603,
41,{},E00009688,
42,{},E00009690,
43,{},E00009607,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00009606","E00009601","E00009581","E00009695","E00009717","E00009689","E00009639","E00009696","E00009609","E00009605","E00009691","E00009697","E00009642","E00009791","E00009694","E00009582","E00009612","E00009793","E00009692","E00009693","E00009790","E00009637","E00009710","E00009643","E00009611","E00009613","E00009683","E00009584","E00009761","E00009698","E00009712","E00009602","E00009610","E00009640","E00009792","E00009600","E00009583","E00009687","E00009762","E00009603","E00009688","E00009690","E00009607"], [0.0 for i in range(0,43)], {"E00009606":"1","E00009601":"2","E00009581":"3","E00009695":"4","E00009717":"5","E00009689":"6","E00009639":"7","E00009696":"8","E00009609":"9","E00009605":"10","E00009691":"11","E00009697":"12","E00009642":"13","E00009791":"14","E00009694":"15","E00009582":"16","E00009612":"17","E00009793":"18","E00009692":"19","E00009693":"20","E00009790":"21","E00009637":"22","E00009710":"23","E00009643":"24","E00009611":"25","E00009613":"26","E00009683":"27","E00009584":"28","E00009761":"29","E00009698":"30","E00009712":"31","E00009602":"32","E00009610":"33","E00009640":"34","E00009792":"35","E00009600":"36","E00009583":"37","E00009687":"38","E00009762":"39","E00009603":"40","E00009688":"41","E00009690":"42","E00009607":"43"})
