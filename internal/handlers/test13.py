import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test13"

    def get_gen_file(self):
        return "{}/test13.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 48:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00016803,
2,{},E00016668,
3,{},E00016794,
4,{},E00016661,
5,{},E00016656,
6,{},E00016781,
7,{},E00016796,
8,{},E00016670,
9,{},E00016664,
10,{},E00016799,
11,{},E00016658,
12,{},E00016631,
13,{},E00016815,
14,{},E00016663,
15,{},E00016823,
16,{},E00016673,
17,{},E00016662,
18,{},E00016667,
19,{},E00016813,
20,{},E00016778,
21,{},E00016788,
22,{},E00016818,
23,{},E00016660,
24,{},E00016808,
25,{},E00016805,
26,{},E00173936,
27,{},E00016655,
28,{},E00173708,
29,{},E00016672,
30,{},E00016666,
31,{},E00016669,
32,{},E00174035,
33,{},E00016632,
34,{},E00016671,
35,{},E00016791,
36,{},E00016814,
37,{},E00016793,
38,{},E00016804,
39,{},E00016653,
40,{},E00016819,
41,{},E00173710,
42,{},E00016806,
43,{},E00016801,
44,{},E00173937,
45,{},E00173938,
46,{},E00016659,
47,{},E00016820,
48,{},E00016800,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00016803","E00016668","E00016794","E00016661","E00016656","E00016781","E00016796","E00016670","E00016664","E00016799","E00016658","E00016631","E00016815","E00016663","E00016823","E00016673","E00016662","E00016667","E00016813","E00016778","E00016788","E00016818","E00016660","E00016808","E00016805","E00173936","E00016655","E00173708","E00016672","E00016666","E00016669","E00174035","E00016632","E00016671","E00016791","E00016814","E00016793","E00016804","E00016653","E00016819","E00173710","E00016806","E00016801","E00173937","E00173938","E00016659","E00016820","E00016800"], [0.0 for i in range(0,48)], {"E00016803":"1","E00016668":"2","E00016794":"3","E00016661":"4","E00016656":"5","E00016781":"6","E00016796":"7","E00016670":"8","E00016664":"9","E00016799":"10","E00016658":"11","E00016631":"12","E00016815":"13","E00016663":"14","E00016823":"15","E00016673":"16","E00016662":"17","E00016667":"18","E00016813":"19","E00016778":"20","E00016788":"21","E00016818":"22","E00016660":"23","E00016808":"24","E00016805":"25","E00173936":"26","E00016655":"27","E00173708":"28","E00016672":"29","E00016666":"30","E00016669":"31","E00174035":"32","E00016632":"33","E00016671":"34","E00016791":"35","E00016814":"36","E00016793":"37","E00016804":"38","E00016653":"39","E00016819":"40","E00173710":"41","E00016806":"42","E00016801":"43","E00173937":"44","E00173938":"45","E00016659":"46","E00016820":"47","E00016800":"48"})
