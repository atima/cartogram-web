import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test138"

    def get_gen_file(self):
        return "{}/test138.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 68:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00175133,
2,{},E00018803,
3,{},E00018556,
4,{},E00018818,
5,{},E00175137,
6,{},E00018806,
7,{},E00018561,
8,{},E00018565,
9,{},E00018796,
10,{},E00018566,
11,{},E00018799,
12,{},E00018815,
13,{},E00018820,
14,{},E00175150,
15,{},E00018549,
16,{},E00018797,
17,{},E00018571,
18,{},E00018816,
19,{},E00018555,
20,{},E00018790,
21,{},E00018551,
22,{},E00018569,
23,{},E00018572,
24,{},E00018808,
25,{},E00018801,
26,{},E00018562,
27,{},E00018805,
28,{},E00018557,
29,{},E00018789,
30,{},E00018810,
31,{},E00018802,
32,{},E00018568,
33,{},E00018821,
34,{},E00018567,
35,{},E00018814,
36,{},E00018552,
37,{},E00018563,
38,{},E00018553,
39,{},E00018570,
40,{},E00018793,
41,{},E00018819,
42,{},E00018817,
43,{},E00018791,
44,{},E00018564,
45,{},E00018812,
46,{},E00018809,
47,{},E00175132,
48,{},E00018543,
49,{},E00175140,
50,{},E00175134,
51,{},E00018548,
52,{},E00018795,
53,{},E00018792,
54,{},E00018813,
55,{},E00018544,
56,{},E00018811,
57,{},E00018807,
58,{},E00018800,
59,{},E00018554,
60,{},E00018804,
61,{},E00018559,
62,{},E00018558,
63,{},E00018550,
64,{},E00018546,
65,{},E00018798,
66,{},E00175131,
67,{},E00018560,
68,{},E00018545,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00175133","E00018803","E00018556","E00018818","E00175137","E00018806","E00018561","E00018565","E00018796","E00018566","E00018799","E00018815","E00018820","E00175150","E00018549","E00018797","E00018571","E00018816","E00018555","E00018790","E00018551","E00018569","E00018572","E00018808","E00018801","E00018562","E00018805","E00018557","E00018789","E00018810","E00018802","E00018568","E00018821","E00018567","E00018814","E00018552","E00018563","E00018553","E00018570","E00018793","E00018819","E00018817","E00018791","E00018564","E00018812","E00018809","E00175132","E00018543","E00175140","E00175134","E00018548","E00018795","E00018792","E00018813","E00018544","E00018811","E00018807","E00018800","E00018554","E00018804","E00018559","E00018558","E00018550","E00018546","E00018798","E00175131","E00018560","E00018545"], [0.0 for i in range(0,68)], {"E00175133":"1","E00018803":"2","E00018556":"3","E00018818":"4","E00175137":"5","E00018806":"6","E00018561":"7","E00018565":"8","E00018796":"9","E00018566":"10","E00018799":"11","E00018815":"12","E00018820":"13","E00175150":"14","E00018549":"15","E00018797":"16","E00018571":"17","E00018816":"18","E00018555":"19","E00018790":"20","E00018551":"21","E00018569":"22","E00018572":"23","E00018808":"24","E00018801":"25","E00018562":"26","E00018805":"27","E00018557":"28","E00018789":"29","E00018810":"30","E00018802":"31","E00018568":"32","E00018821":"33","E00018567":"34","E00018814":"35","E00018552":"36","E00018563":"37","E00018553":"38","E00018570":"39","E00018793":"40","E00018819":"41","E00018817":"42","E00018791":"43","E00018564":"44","E00018812":"45","E00018809":"46","E00175132":"47","E00018543":"48","E00175140":"49","E00175134":"50","E00018548":"51","E00018795":"52","E00018792":"53","E00018813":"54","E00018544":"55","E00018811":"56","E00018807":"57","E00018800":"58","E00018554":"59","E00018804":"60","E00018559":"61","E00018558":"62","E00018550":"63","E00018546":"64","E00018798":"65","E00175131":"66","E00018560":"67","E00018545":"68"})
