import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test14"

    def get_gen_file(self):
        return "{}/test14.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 53:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00002408,
2,{},E00002726,
3,{},E00003083,
4,{},E00003108,
5,{},E00002409,
6,{},E00002392,
7,{},E00002412,
8,{},E00003104,
9,{},E00002421,
10,{},E00002383,
11,{},E00002721,
12,{},E00002415,
13,{},E00003100,
14,{},E00002725,
15,{},E00003103,
16,{},E00003086,
17,{},E00003101,
18,{},E00003073,
19,{},E00003087,
20,{},E00003096,
21,{},E00002719,
22,{},E00002387,
23,{},E00003075,
24,{},E00002713,
25,{},E00002414,
26,{},E00002407,
27,{},E00003098,
28,{},E00003097,
29,{},E00002420,
30,{},E00002393,
31,{},E00002411,
32,{},E00002410,
33,{},E00002722,
34,{},E00002714,
35,{},E00002416,
36,{},E00002397,
37,{},E00002716,
38,{},E00002720,
39,{},E00003106,
40,{},E00002723,
41,{},E00003084,
42,{},E00003089,
43,{},E00003092,
44,{},E00002418,
45,{},E00002386,
46,{},E00003105,
47,{},E00003109,
48,{},E00002406,
49,{},E00002727,
50,{},E00002724,
51,{},E00003093,
52,{},E00002413,
53,{},E00003099,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00002408","E00002726","E00003083","E00003108","E00002409","E00002392","E00002412","E00003104","E00002421","E00002383","E00002721","E00002415","E00003100","E00002725","E00003103","E00003086","E00003101","E00003073","E00003087","E00003096","E00002719","E00002387","E00003075","E00002713","E00002414","E00002407","E00003098","E00003097","E00002420","E00002393","E00002411","E00002410","E00002722","E00002714","E00002416","E00002397","E00002716","E00002720","E00003106","E00002723","E00003084","E00003089","E00003092","E00002418","E00002386","E00003105","E00003109","E00002406","E00002727","E00002724","E00003093","E00002413","E00003099"], [0.0 for i in range(0,53)], {"E00002408":"1","E00002726":"2","E00003083":"3","E00003108":"4","E00002409":"5","E00002392":"6","E00002412":"7","E00003104":"8","E00002421":"9","E00002383":"10","E00002721":"11","E00002415":"12","E00003100":"13","E00002725":"14","E00003103":"15","E00003086":"16","E00003101":"17","E00003073":"18","E00003087":"19","E00003096":"20","E00002719":"21","E00002387":"22","E00003075":"23","E00002713":"24","E00002414":"25","E00002407":"26","E00003098":"27","E00003097":"28","E00002420":"29","E00002393":"30","E00002411":"31","E00002410":"32","E00002722":"33","E00002714":"34","E00002416":"35","E00002397":"36","E00002716":"37","E00002720":"38","E00003106":"39","E00002723":"40","E00003084":"41","E00003089":"42","E00003092":"43","E00002418":"44","E00002386":"45","E00003105":"46","E00003109":"47","E00002406":"48","E00002727":"49","E00002724":"50","E00003093":"51","E00002413":"52","E00003099":"53"})
