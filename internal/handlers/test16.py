import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test16"

    def get_gen_file(self):
        return "{}/test16.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 49:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00006259,
2,{},E00006247,
3,{},E00006248,
4,{},E00006671,
5,{},E00006665,
6,{},E00006227,
7,{},E00006249,
8,{},E00006070,
9,{},E00006647,
10,{},E00006253,
11,{},E00006668,
12,{},E00006258,
13,{},E00006256,
14,{},E00006243,
15,{},E00006669,
16,{},E00006226,
17,{},E00006063,
18,{},E00006653,
19,{},E00006648,
20,{},E00006252,
21,{},E00006069,
22,{},E00006068,
23,{},E00006654,
24,{},E00006242,
25,{},E00006076,
26,{},E00006257,
27,{},E00006645,
28,{},E00006666,
29,{},E00006074,
30,{},E00006650,
31,{},E00006229,
32,{},E00006071,
33,{},E00006261,
34,{},E00006670,
35,{},E00006667,
36,{},E00006672,
37,{},E00006244,
38,{},E00006066,
39,{},E00006245,
40,{},E00006246,
41,{},E00006643,
42,{},E00006250,
43,{},E00006664,
44,{},E00006641,
45,{},E00006656,
46,{},E00006651,
47,{},E00006065,
48,{},E00006251,
49,{},E00006655,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00006259","E00006247","E00006248","E00006671","E00006665","E00006227","E00006249","E00006070","E00006647","E00006253","E00006668","E00006258","E00006256","E00006243","E00006669","E00006226","E00006063","E00006653","E00006648","E00006252","E00006069","E00006068","E00006654","E00006242","E00006076","E00006257","E00006645","E00006666","E00006074","E00006650","E00006229","E00006071","E00006261","E00006670","E00006667","E00006672","E00006244","E00006066","E00006245","E00006246","E00006643","E00006250","E00006664","E00006641","E00006656","E00006651","E00006065","E00006251","E00006655"], [0.0 for i in range(0,49)], {"E00006259":"1","E00006247":"2","E00006248":"3","E00006671":"4","E00006665":"5","E00006227":"6","E00006249":"7","E00006070":"8","E00006647":"9","E00006253":"10","E00006668":"11","E00006258":"12","E00006256":"13","E00006243":"14","E00006669":"15","E00006226":"16","E00006063":"17","E00006653":"18","E00006648":"19","E00006252":"20","E00006069":"21","E00006068":"22","E00006654":"23","E00006242":"24","E00006076":"25","E00006257":"26","E00006645":"27","E00006666":"28","E00006074":"29","E00006650":"30","E00006229":"31","E00006071":"32","E00006261":"33","E00006670":"34","E00006667":"35","E00006672":"36","E00006244":"37","E00006066":"38","E00006245":"39","E00006246":"40","E00006643":"41","E00006250":"42","E00006664":"43","E00006641":"44","E00006656":"45","E00006651":"46","E00006065":"47","E00006251":"48","E00006655":"49"})
