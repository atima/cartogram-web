import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test18"

    def get_gen_file(self):
        return "{}/test18.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 44:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00017934,
2,{},E00017935,
3,{},E00017926,
4,{},E00017928,
5,{},E00017904,
6,{},E00174986,
7,{},E00017899,
8,{},E00017918,
9,{},E00017901,
10,{},E00174983,
11,{},E00017948,
12,{},E00017936,
13,{},E00017927,
14,{},E00174982,
15,{},E00017900,
16,{},E00017925,
17,{},E00017920,
18,{},E00175027,
19,{},E00017931,
20,{},E00017908,
21,{},E00017905,
22,{},E00017938,
23,{},E00017930,
24,{},E00017932,
25,{},E00017940,
26,{},E00017923,
27,{},E00017917,
28,{},E00017921,
29,{},E00017954,
30,{},E00017898,
31,{},E00017933,
32,{},E00017903,
33,{},E00017913,
34,{},E00017914,
35,{},E00017955,
36,{},E00017915,
37,{},E00017924,
38,{},E00017909,
39,{},E00174984,
40,{},E00017911,
41,{},E00017953,
42,{},E00017910,
43,{},E00017937,
44,{},E00017907,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00017934","E00017935","E00017926","E00017928","E00017904","E00174986","E00017899","E00017918","E00017901","E00174983","E00017948","E00017936","E00017927","E00174982","E00017900","E00017925","E00017920","E00175027","E00017931","E00017908","E00017905","E00017938","E00017930","E00017932","E00017940","E00017923","E00017917","E00017921","E00017954","E00017898","E00017933","E00017903","E00017913","E00017914","E00017955","E00017915","E00017924","E00017909","E00174984","E00017911","E00017953","E00017910","E00017937","E00017907"], [0.0 for i in range(0,44)], {"E00017934":"1","E00017935":"2","E00017926":"3","E00017928":"4","E00017904":"5","E00174986":"6","E00017899":"7","E00017918":"8","E00017901":"9","E00174983":"10","E00017948":"11","E00017936":"12","E00017927":"13","E00174982":"14","E00017900":"15","E00017925":"16","E00017920":"17","E00175027":"18","E00017931":"19","E00017908":"20","E00017905":"21","E00017938":"22","E00017930":"23","E00017932":"24","E00017940":"25","E00017923":"26","E00017917":"27","E00017921":"28","E00017954":"29","E00017898":"30","E00017933":"31","E00017903":"32","E00017913":"33","E00017914":"34","E00017955":"35","E00017915":"36","E00017924":"37","E00017909":"38","E00174984":"39","E00017911":"40","E00017953":"41","E00017910":"42","E00017937":"43","E00017907":"44"})
