import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test20"

    def get_gen_file(self):
        return "{}/test20.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 51:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00017026,
2,{},E00017018,
3,{},E00017328,
4,{},E00016992,
5,{},E00017335,
6,{},E00017238,
7,{},E00017236,
8,{},E00017264,
9,{},E00017332,
10,{},E00017080,
11,{},E00017239,
12,{},E00017093,
13,{},E00017233,
14,{},E00017024,
15,{},E00017248,
16,{},E00017069,
17,{},E00017344,
18,{},E00017326,
19,{},E00017323,
20,{},E00017022,
21,{},E00016996,
22,{},E00017262,
23,{},E00017327,
24,{},E00017079,
25,{},E00017259,
26,{},E00017333,
27,{},E00017322,
28,{},E00017351,
29,{},E00017325,
30,{},E00017076,
31,{},E00017251,
32,{},E00017341,
33,{},E00017077,
34,{},E00017329,
35,{},E00017023,
36,{},E00017083,
37,{},E00017256,
38,{},E00016993,
39,{},E00017078,
40,{},E00016997,
41,{},E00017330,
42,{},E00017086,
43,{},E00017331,
44,{},E00016998,
45,{},E00017334,
46,{},E00017343,
47,{},E00017342,
48,{},E00017074,
49,{},E00017258,
50,{},E00016985,
51,{},E00017347,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00017026","E00017018","E00017328","E00016992","E00017335","E00017238","E00017236","E00017264","E00017332","E00017080","E00017239","E00017093","E00017233","E00017024","E00017248","E00017069","E00017344","E00017326","E00017323","E00017022","E00016996","E00017262","E00017327","E00017079","E00017259","E00017333","E00017322","E00017351","E00017325","E00017076","E00017251","E00017341","E00017077","E00017329","E00017023","E00017083","E00017256","E00016993","E00017078","E00016997","E00017330","E00017086","E00017331","E00016998","E00017334","E00017343","E00017342","E00017074","E00017258","E00016985","E00017347"], [0.0 for i in range(0,51)], {"E00017026":"1","E00017018":"2","E00017328":"3","E00016992":"4","E00017335":"5","E00017238":"6","E00017236":"7","E00017264":"8","E00017332":"9","E00017080":"10","E00017239":"11","E00017093":"12","E00017233":"13","E00017024":"14","E00017248":"15","E00017069":"16","E00017344":"17","E00017326":"18","E00017323":"19","E00017022":"20","E00016996":"21","E00017262":"22","E00017327":"23","E00017079":"24","E00017259":"25","E00017333":"26","E00017322":"27","E00017351":"28","E00017325":"29","E00017076":"30","E00017251":"31","E00017341":"32","E00017077":"33","E00017329":"34","E00017023":"35","E00017083":"36","E00017256":"37","E00016993":"38","E00017078":"39","E00016997":"40","E00017330":"41","E00017086":"42","E00017331":"43","E00016998":"44","E00017334":"45","E00017343":"46","E00017342":"47","E00017074":"48","E00017258":"49","E00016985":"50","E00017347":"51"})
