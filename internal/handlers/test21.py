import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test21"

    def get_gen_file(self):
        return "{}/test21.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 57:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00003283,
2,{},E00004045,
3,{},E00003451,
4,{},E00003252,
5,{},E00003281,
6,{},E00003478,
7,{},E00004070,
8,{},E00003481,
9,{},E00003470,
10,{},E00003458,
11,{},E00003455,
12,{},E00003280,
13,{},E00003771,
14,{},E00003759,
15,{},E00003472,
16,{},E00003241,
17,{},E00003479,
18,{},E00003770,
19,{},E00003248,
20,{},E00003774,
21,{},E00003244,
22,{},E00003767,
23,{},E00003775,
24,{},E00003453,
25,{},E00003486,
26,{},E00003778,
27,{},E00004047,
28,{},E00003450,
29,{},E00003765,
30,{},E00003441,
31,{},E00003482,
32,{},E00003457,
33,{},E00004043,
34,{},E00003243,
35,{},E00003456,
36,{},E00003452,
37,{},E00003444,
38,{},E00003442,
39,{},E00003459,
40,{},E00003446,
41,{},E00003468,
42,{},E00003454,
43,{},E00003483,
44,{},E00003476,
45,{},E00003440,
46,{},E00004046,
47,{},E00003484,
48,{},E00003437,
49,{},E00003445,
50,{},E00003475,
51,{},E00004044,
52,{},E00003485,
53,{},E00003449,
54,{},E00003766,
55,{},E00003781,
56,{},E00003242,
57,{},E00003253,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00003283","E00004045","E00003451","E00003252","E00003281","E00003478","E00004070","E00003481","E00003470","E00003458","E00003455","E00003280","E00003771","E00003759","E00003472","E00003241","E00003479","E00003770","E00003248","E00003774","E00003244","E00003767","E00003775","E00003453","E00003486","E00003778","E00004047","E00003450","E00003765","E00003441","E00003482","E00003457","E00004043","E00003243","E00003456","E00003452","E00003444","E00003442","E00003459","E00003446","E00003468","E00003454","E00003483","E00003476","E00003440","E00004046","E00003484","E00003437","E00003445","E00003475","E00004044","E00003485","E00003449","E00003766","E00003781","E00003242","E00003253"], [0.0 for i in range(0,57)], {"E00003283":"1","E00004045":"2","E00003451":"3","E00003252":"4","E00003281":"5","E00003478":"6","E00004070":"7","E00003481":"8","E00003470":"9","E00003458":"10","E00003455":"11","E00003280":"12","E00003771":"13","E00003759":"14","E00003472":"15","E00003241":"16","E00003479":"17","E00003770":"18","E00003248":"19","E00003774":"20","E00003244":"21","E00003767":"22","E00003775":"23","E00003453":"24","E00003486":"25","E00003778":"26","E00004047":"27","E00003450":"28","E00003765":"29","E00003441":"30","E00003482":"31","E00003457":"32","E00004043":"33","E00003243":"34","E00003456":"35","E00003452":"36","E00003444":"37","E00003442":"38","E00003459":"39","E00003446":"40","E00003468":"41","E00003454":"42","E00003483":"43","E00003476":"44","E00003440":"45","E00004046":"46","E00003484":"47","E00003437":"48","E00003445":"49","E00003475":"50","E00004044":"51","E00003485":"52","E00003449":"53","E00003766":"54","E00003781":"55","E00003242":"56","E00003253":"57"})
