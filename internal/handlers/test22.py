import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test22"

    def get_gen_file(self):
        return "{}/test22.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 58:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00023157,
2,{},E00023311,
3,{},E00023306,
4,{},E00023153,
5,{},E00023310,
6,{},E00023287,
7,{},E00023317,
8,{},E00023313,
9,{},E00022699,
10,{},E00022612,
11,{},E00022701,
12,{},E00023155,
13,{},E00170917,
14,{},E00022616,
15,{},E00022614,
16,{},E00022702,
17,{},E00023151,
18,{},E00023288,
19,{},E00170914,
20,{},E00023316,
21,{},E00022700,
22,{},E00023282,
23,{},E00023283,
24,{},E00022619,
25,{},E00022706,
26,{},E00022620,
27,{},E00023307,
28,{},E00023158,
29,{},E00022581,
30,{},E00023281,
31,{},E00023305,
32,{},E00022697,
33,{},E00023314,
34,{},E00023318,
35,{},E00023279,
36,{},E00023291,
37,{},E00022613,
38,{},E00022615,
39,{},E00170918,
40,{},E00023139,
41,{},E00023156,
42,{},E00022621,
43,{},E00170920,
44,{},E00023309,
45,{},E00022704,
46,{},E00023319,
47,{},E00023284,
48,{},E00170919,
49,{},E00022703,
50,{},E00170921,
51,{},E00022618,
52,{},E00022708,
53,{},E00022707,
54,{},E00023315,
55,{},E00022705,
56,{},E00023149,
57,{},E00170915,
58,{},E00023152,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00023157","E00023311","E00023306","E00023153","E00023310","E00023287","E00023317","E00023313","E00022699","E00022612","E00022701","E00023155","E00170917","E00022616","E00022614","E00022702","E00023151","E00023288","E00170914","E00023316","E00022700","E00023282","E00023283","E00022619","E00022706","E00022620","E00023307","E00023158","E00022581","E00023281","E00023305","E00022697","E00023314","E00023318","E00023279","E00023291","E00022613","E00022615","E00170918","E00023139","E00023156","E00022621","E00170920","E00023309","E00022704","E00023319","E00023284","E00170919","E00022703","E00170921","E00022618","E00022708","E00022707","E00023315","E00022705","E00023149","E00170915","E00023152"], [0.0 for i in range(0,58)], {"E00023157":"1","E00023311":"2","E00023306":"3","E00023153":"4","E00023310":"5","E00023287":"6","E00023317":"7","E00023313":"8","E00022699":"9","E00022612":"10","E00022701":"11","E00023155":"12","E00170917":"13","E00022616":"14","E00022614":"15","E00022702":"16","E00023151":"17","E00023288":"18","E00170914":"19","E00023316":"20","E00022700":"21","E00023282":"22","E00023283":"23","E00022619":"24","E00022706":"25","E00022620":"26","E00023307":"27","E00023158":"28","E00022581":"29","E00023281":"30","E00023305":"31","E00022697":"32","E00023314":"33","E00023318":"34","E00023279":"35","E00023291":"36","E00022613":"37","E00022615":"38","E00170918":"39","E00023139":"40","E00023156":"41","E00022621":"42","E00170920":"43","E00023309":"44","E00022704":"45","E00023319":"46","E00023284":"47","E00170919":"48","E00022703":"49","E00170921":"50","E00022618":"51","E00022708":"52","E00022707":"53","E00023315":"54","E00022705":"55","E00023149":"56","E00170915":"57","E00023152":"58"})
