import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test23"

    def get_gen_file(self):
        return "{}/test23.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 49:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00011950,
2,{},E00012094,
3,{},E00011952,
4,{},E00012654,
5,{},E00011956,
6,{},E00011972,
7,{},E00012670,
8,{},E00012663,
9,{},E00011973,
10,{},E00012662,
11,{},E00011947,
12,{},E00012664,
13,{},E00011961,
14,{},E00011970,
15,{},E00012659,
16,{},E00011951,
17,{},E00011943,
18,{},E00011945,
19,{},E00011968,
20,{},E00011946,
21,{},E00012669,
22,{},E00011942,
23,{},E00011948,
24,{},E00011965,
25,{},E00012666,
26,{},E00011949,
27,{},E00012665,
28,{},E00011941,
29,{},E00012079,
30,{},E00012657,
31,{},E00011971,
32,{},E00011958,
33,{},E00012661,
34,{},E00012640,
35,{},E00011964,
36,{},E00011944,
37,{},E00011969,
38,{},E00012089,
39,{},E00011955,
40,{},E00011966,
41,{},E00011953,
42,{},E00011962,
43,{},E00011967,
44,{},E00012639,
45,{},E00012098,
46,{},E00012656,
47,{},E00011963,
48,{},E00012667,
49,{},E00012100,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00011950","E00012094","E00011952","E00012654","E00011956","E00011972","E00012670","E00012663","E00011973","E00012662","E00011947","E00012664","E00011961","E00011970","E00012659","E00011951","E00011943","E00011945","E00011968","E00011946","E00012669","E00011942","E00011948","E00011965","E00012666","E00011949","E00012665","E00011941","E00012079","E00012657","E00011971","E00011958","E00012661","E00012640","E00011964","E00011944","E00011969","E00012089","E00011955","E00011966","E00011953","E00011962","E00011967","E00012639","E00012098","E00012656","E00011963","E00012667","E00012100"], [0.0 for i in range(0,49)], {"E00011950":"1","E00012094":"2","E00011952":"3","E00012654":"4","E00011956":"5","E00011972":"6","E00012670":"7","E00012663":"8","E00011973":"9","E00012662":"10","E00011947":"11","E00012664":"12","E00011961":"13","E00011970":"14","E00012659":"15","E00011951":"16","E00011943":"17","E00011945":"18","E00011968":"19","E00011946":"20","E00012669":"21","E00011942":"22","E00011948":"23","E00011965":"24","E00012666":"25","E00011949":"26","E00012665":"27","E00011941":"28","E00012079":"29","E00012657":"30","E00011971":"31","E00011958":"32","E00012661":"33","E00012640":"34","E00011964":"35","E00011944":"36","E00011969":"37","E00012089":"38","E00011955":"39","E00011966":"40","E00011953":"41","E00011962":"42","E00011967":"43","E00012639":"44","E00012098":"45","E00012656":"46","E00011963":"47","E00012667":"48","E00012100":"49"})
