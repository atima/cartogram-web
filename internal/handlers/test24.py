import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test24"

    def get_gen_file(self):
        return "{}/test24.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 37:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00010309,
2,{},E00010300,
3,{},E00010314,
4,{},E00010306,
5,{},E00010325,
6,{},E00010315,
7,{},E00010294,
8,{},E00010311,
9,{},E00010301,
10,{},E00010308,
11,{},E00010317,
12,{},E00010333,
13,{},E00010322,
14,{},E00010330,
15,{},E00010302,
16,{},E00010324,
17,{},E00010321,
18,{},E00010305,
19,{},E00010299,
20,{},E00010307,
21,{},E00010303,
22,{},E00010293,
23,{},E00010329,
24,{},E00010320,
25,{},E00010332,
26,{},E00010296,
27,{},E00010295,
28,{},E00010304,
29,{},E00010323,
30,{},E00010331,
31,{},E00010318,
32,{},E00010310,
33,{},E00010316,
34,{},E00010313,
35,{},E00010297,
36,{},E00010298,
37,{},E00010312,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00010309","E00010300","E00010314","E00010306","E00010325","E00010315","E00010294","E00010311","E00010301","E00010308","E00010317","E00010333","E00010322","E00010330","E00010302","E00010324","E00010321","E00010305","E00010299","E00010307","E00010303","E00010293","E00010329","E00010320","E00010332","E00010296","E00010295","E00010304","E00010323","E00010331","E00010318","E00010310","E00010316","E00010313","E00010297","E00010298","E00010312"], [0.0 for i in range(0,37)], {"E00010309":"1","E00010300":"2","E00010314":"3","E00010306":"4","E00010325":"5","E00010315":"6","E00010294":"7","E00010311":"8","E00010301":"9","E00010308":"10","E00010317":"11","E00010333":"12","E00010322":"13","E00010330":"14","E00010302":"15","E00010324":"16","E00010321":"17","E00010305":"18","E00010299":"19","E00010307":"20","E00010303":"21","E00010293":"22","E00010329":"23","E00010320":"24","E00010332":"25","E00010296":"26","E00010295":"27","E00010304":"28","E00010323":"29","E00010331":"30","E00010318":"31","E00010310":"32","E00010316":"33","E00010313":"34","E00010297":"35","E00010298":"36","E00010312":"37"})
