import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test26"

    def get_gen_file(self):
        return "{}/test26.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 60:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00003743,
2,{},E00004076,
3,{},E00004082,
4,{},E00004086,
5,{},E00003744,
6,{},E00004098,
7,{},E00004118,
8,{},E00004078,
9,{},E00004101,
10,{},E00004115,
11,{},E00004103,
12,{},E00004084,
13,{},E00003713,
14,{},E00003714,
15,{},E00004108,
16,{},E00004083,
17,{},E00003752,
18,{},E00003711,
19,{},E00004080,
20,{},E00003753,
21,{},E00004093,
22,{},E00004119,
23,{},E00004075,
24,{},E00003751,
25,{},E00003755,
26,{},E00003715,
27,{},E00004089,
28,{},E00004114,
29,{},E00003748,
30,{},E00004112,
31,{},E00003745,
32,{},E00004111,
33,{},E00003749,
34,{},E00004113,
35,{},E00004109,
36,{},E00003750,
37,{},E00004106,
38,{},E00004110,
39,{},E00004079,
40,{},E00003746,
41,{},E00004102,
42,{},E00004090,
43,{},E00004091,
44,{},E00004092,
45,{},E00004116,
46,{},E00004096,
47,{},E00003754,
48,{},E00004097,
49,{},E00003747,
50,{},E00003756,
51,{},E00004085,
52,{},E00004099,
53,{},E00004095,
54,{},E00004100,
55,{},E00004081,
56,{},E00004117,
57,{},E00003712,
58,{},E00004088,
59,{},E00004087,
60,{},E00004094,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00003743","E00004076","E00004082","E00004086","E00003744","E00004098","E00004118","E00004078","E00004101","E00004115","E00004103","E00004084","E00003713","E00003714","E00004108","E00004083","E00003752","E00003711","E00004080","E00003753","E00004093","E00004119","E00004075","E00003751","E00003755","E00003715","E00004089","E00004114","E00003748","E00004112","E00003745","E00004111","E00003749","E00004113","E00004109","E00003750","E00004106","E00004110","E00004079","E00003746","E00004102","E00004090","E00004091","E00004092","E00004116","E00004096","E00003754","E00004097","E00003747","E00003756","E00004085","E00004099","E00004095","E00004100","E00004081","E00004117","E00003712","E00004088","E00004087","E00004094"], [0.0 for i in range(0,60)], {"E00003743":"1","E00004076":"2","E00004082":"3","E00004086":"4","E00003744":"5","E00004098":"6","E00004118":"7","E00004078":"8","E00004101":"9","E00004115":"10","E00004103":"11","E00004084":"12","E00003713":"13","E00003714":"14","E00004108":"15","E00004083":"16","E00003752":"17","E00003711":"18","E00004080":"19","E00003753":"20","E00004093":"21","E00004119":"22","E00004075":"23","E00003751":"24","E00003755":"25","E00003715":"26","E00004089":"27","E00004114":"28","E00003748":"29","E00004112":"30","E00003745":"31","E00004111":"32","E00003749":"33","E00004113":"34","E00004109":"35","E00003750":"36","E00004106":"37","E00004110":"38","E00004079":"39","E00003746":"40","E00004102":"41","E00004090":"42","E00004091":"43","E00004092":"44","E00004116":"45","E00004096":"46","E00003754":"47","E00004097":"48","E00003747":"49","E00003756":"50","E00004085":"51","E00004099":"52","E00004095":"53","E00004100":"54","E00004081":"55","E00004117":"56","E00003712":"57","E00004088":"58","E00004087":"59","E00004094":"60"})
