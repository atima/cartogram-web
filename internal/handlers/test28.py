import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test28"

    def get_gen_file(self):
        return "{}/test28.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 54:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00016845,
2,{},E00016847,
3,{},E00016863,
4,{},E00016843,
5,{},E00016869,
6,{},E00016871,
7,{},E00016846,
8,{},E00016842,
9,{},E00016828,
10,{},E00016876,
11,{},E00016865,
12,{},E00016831,
13,{},E00016870,
14,{},E00016854,
15,{},E00016848,
16,{},E00016825,
17,{},E00016841,
18,{},E00016834,
19,{},E00016844,
20,{},E00016868,
21,{},E00016875,
22,{},E00016836,
23,{},E00016830,
24,{},E00016856,
25,{},E00016866,
26,{},E00016864,
27,{},E00016850,
28,{},E00016840,
29,{},E00016827,
30,{},E00016855,
31,{},E00016859,
32,{},E00016872,
33,{},E00016862,
34,{},E00016835,
35,{},E00016833,
36,{},E00016853,
37,{},E00016867,
38,{},E00016852,
39,{},E00016826,
40,{},E00016849,
41,{},E00016829,
42,{},E00016857,
43,{},E00016851,
44,{},E00016877,
45,{},E00016874,
46,{},E00016839,
47,{},E00016878,
48,{},E00016838,
49,{},E00016873,
50,{},E00016860,
51,{},E00016837,
52,{},E00016861,
53,{},E00016832,
54,{},E00016858,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00016845","E00016847","E00016863","E00016843","E00016869","E00016871","E00016846","E00016842","E00016828","E00016876","E00016865","E00016831","E00016870","E00016854","E00016848","E00016825","E00016841","E00016834","E00016844","E00016868","E00016875","E00016836","E00016830","E00016856","E00016866","E00016864","E00016850","E00016840","E00016827","E00016855","E00016859","E00016872","E00016862","E00016835","E00016833","E00016853","E00016867","E00016852","E00016826","E00016849","E00016829","E00016857","E00016851","E00016877","E00016874","E00016839","E00016878","E00016838","E00016873","E00016860","E00016837","E00016861","E00016832","E00016858"], [0.0 for i in range(0,54)], {"E00016845":"1","E00016847":"2","E00016863":"3","E00016843":"4","E00016869":"5","E00016871":"6","E00016846":"7","E00016842":"8","E00016828":"9","E00016876":"10","E00016865":"11","E00016831":"12","E00016870":"13","E00016854":"14","E00016848":"15","E00016825":"16","E00016841":"17","E00016834":"18","E00016844":"19","E00016868":"20","E00016875":"21","E00016836":"22","E00016830":"23","E00016856":"24","E00016866":"25","E00016864":"26","E00016850":"27","E00016840":"28","E00016827":"29","E00016855":"30","E00016859":"31","E00016872":"32","E00016862":"33","E00016835":"34","E00016833":"35","E00016853":"36","E00016867":"37","E00016852":"38","E00016826":"39","E00016849":"40","E00016829":"41","E00016857":"42","E00016851":"43","E00016877":"44","E00016874":"45","E00016839":"46","E00016878":"47","E00016838":"48","E00016873":"49","E00016860":"50","E00016837":"51","E00016861":"52","E00016832":"53","E00016858":"54"})
