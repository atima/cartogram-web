import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test30"

    def get_gen_file(self):
        return "{}/test30.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 43:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00012505,
2,{},E00012219,
3,{},E00012235,
4,{},E00012239,
5,{},E00012267,
6,{},E00012512,
7,{},E00012270,
8,{},E00012518,
9,{},E00012212,
10,{},E00012491,
11,{},E00012240,
12,{},E00012274,
13,{},E00012238,
14,{},E00012215,
15,{},E00012517,
16,{},E00012236,
17,{},E00012519,
18,{},E00012243,
19,{},E00012494,
20,{},E00012217,
21,{},E00012511,
22,{},E00012214,
23,{},E00012210,
24,{},E00012213,
25,{},E00012216,
26,{},E00012218,
27,{},E00012273,
28,{},E00012234,
29,{},E00012209,
30,{},E00012513,
31,{},E00012524,
32,{},E00012244,
33,{},E00012504,
34,{},E00012241,
35,{},E00012237,
36,{},E00012268,
37,{},E00012242,
38,{},E00012508,
39,{},E00012514,
40,{},E00012252,
41,{},E00012275,
42,{},E00012261,
43,{},E00012211,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00012505","E00012219","E00012235","E00012239","E00012267","E00012512","E00012270","E00012518","E00012212","E00012491","E00012240","E00012274","E00012238","E00012215","E00012517","E00012236","E00012519","E00012243","E00012494","E00012217","E00012511","E00012214","E00012210","E00012213","E00012216","E00012218","E00012273","E00012234","E00012209","E00012513","E00012524","E00012244","E00012504","E00012241","E00012237","E00012268","E00012242","E00012508","E00012514","E00012252","E00012275","E00012261","E00012211"], [0.0 for i in range(0,43)], {"E00012505":"1","E00012219":"2","E00012235":"3","E00012239":"4","E00012267":"5","E00012512":"6","E00012270":"7","E00012518":"8","E00012212":"9","E00012491":"10","E00012240":"11","E00012274":"12","E00012238":"13","E00012215":"14","E00012517":"15","E00012236":"16","E00012519":"17","E00012243":"18","E00012494":"19","E00012217":"20","E00012511":"21","E00012214":"22","E00012210":"23","E00012213":"24","E00012216":"25","E00012218":"26","E00012273":"27","E00012234":"28","E00012209":"29","E00012513":"30","E00012524":"31","E00012244":"32","E00012504":"33","E00012241":"34","E00012237":"35","E00012268":"36","E00012242":"37","E00012508":"38","E00012514":"39","E00012252":"40","E00012275":"41","E00012261":"42","E00012211":"43"})
