import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test32"

    def get_gen_file(self):
        return "{}/test32.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 48:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00008048,
2,{},E00008243,
3,{},E00008248,
4,{},E00008027,
5,{},E00008055,
6,{},E00008252,
7,{},E00008058,
8,{},E00008051,
9,{},E00008240,
10,{},E00008053,
11,{},E00008046,
12,{},E00008258,
13,{},E00008035,
14,{},E00008236,
15,{},E00008247,
16,{},E00008025,
17,{},E00008238,
18,{},E00008024,
19,{},E00008054,
20,{},E00008256,
21,{},E00008036,
22,{},E00008043,
23,{},E00008257,
24,{},E00008033,
25,{},E00008241,
26,{},E00008020,
27,{},E00008244,
28,{},E00008251,
29,{},E00008254,
30,{},E00008235,
31,{},E00008250,
32,{},E00008019,
33,{},E00008245,
34,{},E00008242,
35,{},E00008234,
36,{},E00008239,
37,{},E00008052,
38,{},E00008249,
39,{},E00008255,
40,{},E00008030,
41,{},E00008057,
42,{},E00008021,
43,{},E00008246,
44,{},E00008050,
45,{},E00008276,
46,{},E00008045,
47,{},E00008042,
48,{},E00008253,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00008048","E00008243","E00008248","E00008027","E00008055","E00008252","E00008058","E00008051","E00008240","E00008053","E00008046","E00008258","E00008035","E00008236","E00008247","E00008025","E00008238","E00008024","E00008054","E00008256","E00008036","E00008043","E00008257","E00008033","E00008241","E00008020","E00008244","E00008251","E00008254","E00008235","E00008250","E00008019","E00008245","E00008242","E00008234","E00008239","E00008052","E00008249","E00008255","E00008030","E00008057","E00008021","E00008246","E00008050","E00008276","E00008045","E00008042","E00008253"], [0.0 for i in range(0,48)], {"E00008048":"1","E00008243":"2","E00008248":"3","E00008027":"4","E00008055":"5","E00008252":"6","E00008058":"7","E00008051":"8","E00008240":"9","E00008053":"10","E00008046":"11","E00008258":"12","E00008035":"13","E00008236":"14","E00008247":"15","E00008025":"16","E00008238":"17","E00008024":"18","E00008054":"19","E00008256":"20","E00008036":"21","E00008043":"22","E00008257":"23","E00008033":"24","E00008241":"25","E00008020":"26","E00008244":"27","E00008251":"28","E00008254":"29","E00008235":"30","E00008250":"31","E00008019":"32","E00008245":"33","E00008242":"34","E00008234":"35","E00008239":"36","E00008052":"37","E00008249":"38","E00008255":"39","E00008030":"40","E00008057":"41","E00008021":"42","E00008246":"43","E00008050":"44","E00008276":"45","E00008045":"46","E00008042":"47","E00008253":"48"})
