import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test34"

    def get_gen_file(self):
        return "{}/test34.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 62:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00000416,
2,{},E00000311,
3,{},E00000321,
4,{},E00000392,
5,{},E00000403,
6,{},E00000507,
7,{},E00000168,
8,{},E00000308,
9,{},E00000324,
10,{},E00000509,
11,{},E00000402,
12,{},E00000401,
13,{},E00000300,
14,{},E00000417,
15,{},E00000414,
16,{},E00000327,
17,{},E00000419,
18,{},E00000396,
19,{},E00000169,
20,{},E00000309,
21,{},E00000314,
22,{},E00000408,
23,{},E00000313,
24,{},E00000301,
25,{},E00000310,
26,{},E00000390,
27,{},E00000405,
28,{},E00000322,
29,{},E00000318,
30,{},E00000328,
31,{},E00000502,
32,{},E00000411,
33,{},E00000316,
34,{},E00000394,
35,{},E00000404,
36,{},E00000304,
37,{},E00000400,
38,{},E00000391,
39,{},E00000320,
40,{},E00000418,
41,{},E00000312,
42,{},E00000397,
43,{},E00000299,
44,{},E00000198,
45,{},E00000399,
46,{},E00000307,
47,{},E00000407,
48,{},E00000172,
49,{},E00000398,
50,{},E00000319,
51,{},E00000329,
52,{},E00000415,
53,{},E00000505,
54,{},E00000323,
55,{},E00000305,
56,{},E00000330,
57,{},E00000326,
58,{},E00000393,
59,{},E00000395,
60,{},E00000317,
61,{},E00000508,
62,{},E00000325,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00000416","E00000311","E00000321","E00000392","E00000403","E00000507","E00000168","E00000308","E00000324","E00000509","E00000402","E00000401","E00000300","E00000417","E00000414","E00000327","E00000419","E00000396","E00000169","E00000309","E00000314","E00000408","E00000313","E00000301","E00000310","E00000390","E00000405","E00000322","E00000318","E00000328","E00000502","E00000411","E00000316","E00000394","E00000404","E00000304","E00000400","E00000391","E00000320","E00000418","E00000312","E00000397","E00000299","E00000198","E00000399","E00000307","E00000407","E00000172","E00000398","E00000319","E00000329","E00000415","E00000505","E00000323","E00000305","E00000330","E00000326","E00000393","E00000395","E00000317","E00000508","E00000325"], [0.0 for i in range(0,62)], {"E00000416":"1","E00000311":"2","E00000321":"3","E00000392":"4","E00000403":"5","E00000507":"6","E00000168":"7","E00000308":"8","E00000324":"9","E00000509":"10","E00000402":"11","E00000401":"12","E00000300":"13","E00000417":"14","E00000414":"15","E00000327":"16","E00000419":"17","E00000396":"18","E00000169":"19","E00000309":"20","E00000314":"21","E00000408":"22","E00000313":"23","E00000301":"24","E00000310":"25","E00000390":"26","E00000405":"27","E00000322":"28","E00000318":"29","E00000328":"30","E00000502":"31","E00000411":"32","E00000316":"33","E00000394":"34","E00000404":"35","E00000304":"36","E00000400":"37","E00000391":"38","E00000320":"39","E00000418":"40","E00000312":"41","E00000397":"42","E00000299":"43","E00000198":"44","E00000399":"45","E00000307":"46","E00000407":"47","E00000172":"48","E00000398":"49","E00000319":"50","E00000329":"51","E00000415":"52","E00000505":"53","E00000323":"54","E00000305":"55","E00000330":"56","E00000326":"57","E00000393":"58","E00000395":"59","E00000317":"60","E00000508":"61","E00000325":"62"})
