import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test37"

    def get_gen_file(self):
        return "{}/test37.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 53:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00018833,
2,{},E00018828,
3,{},E00018434,
4,{},E00018841,
5,{},E00018842,
6,{},E00018832,
7,{},E00018848,
8,{},E00018846,
9,{},E00018417,
10,{},E00018827,
11,{},E00018426,
12,{},E00018852,
13,{},E00018826,
14,{},E00018847,
15,{},E00018837,
16,{},E00018419,
17,{},E00018437,
18,{},E00018851,
19,{},E00018834,
20,{},E00018823,
21,{},E00018432,
22,{},E00018430,
23,{},E00018854,
24,{},E00018423,
25,{},E00018413,
26,{},E00018414,
27,{},E00018422,
28,{},E00018405,
29,{},E00018415,
30,{},E00018440,
31,{},E00018840,
32,{},E00018824,
33,{},E00018829,
34,{},E00018825,
35,{},E00018850,
36,{},E00018408,
37,{},E00018835,
38,{},E00018845,
39,{},E00018429,
40,{},E00018843,
41,{},E00018433,
42,{},E00018830,
43,{},E00018844,
44,{},E00018438,
45,{},E00018836,
46,{},E00018822,
47,{},E00018853,
48,{},E00018838,
49,{},E00018416,
50,{},E00018427,
51,{},E00018831,
52,{},E00018839,
53,{},E00018849,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00018833","E00018828","E00018434","E00018841","E00018842","E00018832","E00018848","E00018846","E00018417","E00018827","E00018426","E00018852","E00018826","E00018847","E00018837","E00018419","E00018437","E00018851","E00018834","E00018823","E00018432","E00018430","E00018854","E00018423","E00018413","E00018414","E00018422","E00018405","E00018415","E00018440","E00018840","E00018824","E00018829","E00018825","E00018850","E00018408","E00018835","E00018845","E00018429","E00018843","E00018433","E00018830","E00018844","E00018438","E00018836","E00018822","E00018853","E00018838","E00018416","E00018427","E00018831","E00018839","E00018849"], [0.0 for i in range(0,53)], {"E00018833":"1","E00018828":"2","E00018434":"3","E00018841":"4","E00018842":"5","E00018832":"6","E00018848":"7","E00018846":"8","E00018417":"9","E00018827":"10","E00018426":"11","E00018852":"12","E00018826":"13","E00018847":"14","E00018837":"15","E00018419":"16","E00018437":"17","E00018851":"18","E00018834":"19","E00018823":"20","E00018432":"21","E00018430":"22","E00018854":"23","E00018423":"24","E00018413":"25","E00018414":"26","E00018422":"27","E00018405":"28","E00018415":"29","E00018440":"30","E00018840":"31","E00018824":"32","E00018829":"33","E00018825":"34","E00018850":"35","E00018408":"36","E00018835":"37","E00018845":"38","E00018429":"39","E00018843":"40","E00018433":"41","E00018830":"42","E00018844":"43","E00018438":"44","E00018836":"45","E00018822":"46","E00018853":"47","E00018838":"48","E00018416":"49","E00018427":"50","E00018831":"51","E00018839":"52","E00018849":"53"})
