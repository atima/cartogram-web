import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test38"

    def get_gen_file(self):
        return "{}/test38.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 52:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00022824,
2,{},E00022842,
3,{},E00022914,
4,{},E00022817,
5,{},E00022816,
6,{},E00022818,
7,{},E00022832,
8,{},E00023110,
9,{},E00022819,
10,{},E00022828,
11,{},E00023132,
12,{},E00022830,
13,{},E00022829,
14,{},E00023129,
15,{},E00022922,
16,{},E00023107,
17,{},E00022827,
18,{},E00022825,
19,{},E00022835,
20,{},E00022843,
21,{},E00022858,
22,{},E00022820,
23,{},E00023116,
24,{},E00022831,
25,{},E00023133,
26,{},E00022833,
27,{},E00022921,
28,{},E00023122,
29,{},E00023125,
30,{},E00022838,
31,{},E00022834,
32,{},E00023126,
33,{},E00022840,
34,{},E00171077,
35,{},E00022813,
36,{},E00023096,
37,{},E00022857,
38,{},E00022815,
39,{},E00022822,
40,{},E00023098,
41,{},E00022841,
42,{},E00022839,
43,{},E00022823,
44,{},E00022924,
45,{},E00023100,
46,{},E00022826,
47,{},E00022821,
48,{},E00022836,
49,{},E00022814,
50,{},E00022916,
51,{},E00170948,
52,{},E00022919,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00022824","E00022842","E00022914","E00022817","E00022816","E00022818","E00022832","E00023110","E00022819","E00022828","E00023132","E00022830","E00022829","E00023129","E00022922","E00023107","E00022827","E00022825","E00022835","E00022843","E00022858","E00022820","E00023116","E00022831","E00023133","E00022833","E00022921","E00023122","E00023125","E00022838","E00022834","E00023126","E00022840","E00171077","E00022813","E00023096","E00022857","E00022815","E00022822","E00023098","E00022841","E00022839","E00022823","E00022924","E00023100","E00022826","E00022821","E00022836","E00022814","E00022916","E00170948","E00022919"], [0.0 for i in range(0,52)], {"E00022824":"1","E00022842":"2","E00022914":"3","E00022817":"4","E00022816":"5","E00022818":"6","E00022832":"7","E00023110":"8","E00022819":"9","E00022828":"10","E00023132":"11","E00022830":"12","E00022829":"13","E00023129":"14","E00022922":"15","E00023107":"16","E00022827":"17","E00022825":"18","E00022835":"19","E00022843":"20","E00022858":"21","E00022820":"22","E00023116":"23","E00022831":"24","E00023133":"25","E00022833":"26","E00022921":"27","E00023122":"28","E00023125":"29","E00022838":"30","E00022834":"31","E00023126":"32","E00022840":"33","E00171077":"34","E00022813":"35","E00023096":"36","E00022857":"37","E00022815":"38","E00022822":"39","E00023098":"40","E00022841":"41","E00022839":"42","E00022823":"43","E00022924":"44","E00023100":"45","E00022826":"46","E00022821":"47","E00022836":"48","E00022814":"49","E00022916":"50","E00170948":"51","E00022919":"52"})
