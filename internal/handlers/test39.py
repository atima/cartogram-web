import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test39"

    def get_gen_file(self):
        return "{}/test39.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 65:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00013662,
2,{},E00174842,
3,{},E00013853,
4,{},E00013527,
5,{},E00013508,
6,{},E00013535,
7,{},E00174752,
8,{},E00013690,
9,{},E00013938,
10,{},E00013687,
11,{},E00013828,
12,{},E00013864,
13,{},E00013941,
14,{},E00013539,
15,{},E00013834,
16,{},E00013509,
17,{},E00013531,
18,{},E00013631,
19,{},E00013688,
20,{},E00174742,
21,{},E00013935,
22,{},E00013661,
23,{},E00013657,
24,{},E00013851,
25,{},E00013870,
26,{},E00013863,
27,{},E00013654,
28,{},E00013940,
29,{},E00013936,
30,{},E00013832,
31,{},E00013532,
32,{},E00013681,
33,{},E00013626,
34,{},E00013861,
35,{},E00013865,
36,{},E00013836,
37,{},E00013536,
38,{},E00013526,
39,{},E00013866,
40,{},E00013625,
41,{},E00013542,
42,{},E00013512,
43,{},E00013655,
44,{},E00013659,
45,{},E00013689,
46,{},E00013517,
47,{},E00013833,
48,{},E00013510,
49,{},E00013862,
50,{},E00013855,
51,{},E00013943,
52,{},E00013528,
53,{},E00013630,
54,{},E00013868,
55,{},E00013837,
56,{},E00013514,
57,{},E00013525,
58,{},E00013934,
59,{},E00013685,
60,{},E00013933,
61,{},E00013520,
62,{},E00013653,
63,{},E00013939,
64,{},E00013624,
65,{},E00174833,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00013662","E00174842","E00013853","E00013527","E00013508","E00013535","E00174752","E00013690","E00013938","E00013687","E00013828","E00013864","E00013941","E00013539","E00013834","E00013509","E00013531","E00013631","E00013688","E00174742","E00013935","E00013661","E00013657","E00013851","E00013870","E00013863","E00013654","E00013940","E00013936","E00013832","E00013532","E00013681","E00013626","E00013861","E00013865","E00013836","E00013536","E00013526","E00013866","E00013625","E00013542","E00013512","E00013655","E00013659","E00013689","E00013517","E00013833","E00013510","E00013862","E00013855","E00013943","E00013528","E00013630","E00013868","E00013837","E00013514","E00013525","E00013934","E00013685","E00013933","E00013520","E00013653","E00013939","E00013624","E00174833"], [0.0 for i in range(0,65)], {"E00013662":"1","E00174842":"2","E00013853":"3","E00013527":"4","E00013508":"5","E00013535":"6","E00174752":"7","E00013690":"8","E00013938":"9","E00013687":"10","E00013828":"11","E00013864":"12","E00013941":"13","E00013539":"14","E00013834":"15","E00013509":"16","E00013531":"17","E00013631":"18","E00013688":"19","E00174742":"20","E00013935":"21","E00013661":"22","E00013657":"23","E00013851":"24","E00013870":"25","E00013863":"26","E00013654":"27","E00013940":"28","E00013936":"29","E00013832":"30","E00013532":"31","E00013681":"32","E00013626":"33","E00013861":"34","E00013865":"35","E00013836":"36","E00013536":"37","E00013526":"38","E00013866":"39","E00013625":"40","E00013542":"41","E00013512":"42","E00013655":"43","E00013659":"44","E00013689":"45","E00013517":"46","E00013833":"47","E00013510":"48","E00013862":"49","E00013855":"50","E00013943":"51","E00013528":"52","E00013630":"53","E00013868":"54","E00013837":"55","E00013514":"56","E00013525":"57","E00013934":"58","E00013685":"59","E00013933":"60","E00013520":"61","E00013653":"62","E00013939":"63","E00013624":"64","E00174833":"65"})
