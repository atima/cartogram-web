import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test42"

    def get_gen_file(self):
        return "{}/test42.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 48:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00006011,
2,{},E00006418,
3,{},E00006423,
4,{},E00006422,
5,{},E00006424,
6,{},E00006028,
7,{},E00006427,
8,{},E00006420,
9,{},E00006017,
10,{},E00006433,
11,{},E00006053,
12,{},E00006025,
13,{},E00006034,
14,{},E00006425,
15,{},E00006050,
16,{},E00006022,
17,{},E00006040,
18,{},E00006054,
19,{},E00006026,
20,{},E00006417,
21,{},E00006035,
22,{},E00006012,
23,{},E00006419,
24,{},E00006021,
25,{},E00006421,
26,{},E00006018,
27,{},E00006030,
28,{},E00006413,
29,{},E00006036,
30,{},E00006049,
31,{},E00006029,
32,{},E00006024,
33,{},E00006414,
34,{},E00006032,
35,{},E00006031,
36,{},E00006037,
37,{},E00006023,
38,{},E00006415,
39,{},E00006410,
40,{},E00006056,
41,{},E00006438,
42,{},E00006052,
43,{},E00006404,
44,{},E00006027,
45,{},E00006039,
46,{},E00006441,
47,{},E00006033,
48,{},E00006038,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00006011","E00006418","E00006423","E00006422","E00006424","E00006028","E00006427","E00006420","E00006017","E00006433","E00006053","E00006025","E00006034","E00006425","E00006050","E00006022","E00006040","E00006054","E00006026","E00006417","E00006035","E00006012","E00006419","E00006021","E00006421","E00006018","E00006030","E00006413","E00006036","E00006049","E00006029","E00006024","E00006414","E00006032","E00006031","E00006037","E00006023","E00006415","E00006410","E00006056","E00006438","E00006052","E00006404","E00006027","E00006039","E00006441","E00006033","E00006038"], [0.0 for i in range(0,48)], {"E00006011":"1","E00006418":"2","E00006423":"3","E00006422":"4","E00006424":"5","E00006028":"6","E00006427":"7","E00006420":"8","E00006017":"9","E00006433":"10","E00006053":"11","E00006025":"12","E00006034":"13","E00006425":"14","E00006050":"15","E00006022":"16","E00006040":"17","E00006054":"18","E00006026":"19","E00006417":"20","E00006035":"21","E00006012":"22","E00006419":"23","E00006021":"24","E00006421":"25","E00006018":"26","E00006030":"27","E00006413":"28","E00006036":"29","E00006049":"30","E00006029":"31","E00006024":"32","E00006414":"33","E00006032":"34","E00006031":"35","E00006037":"36","E00006023":"37","E00006415":"38","E00006410":"39","E00006056":"40","E00006438":"41","E00006052":"42","E00006404":"43","E00006027":"44","E00006039":"45","E00006441":"46","E00006033":"47","E00006038":"48"})
