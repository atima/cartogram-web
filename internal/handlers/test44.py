import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test44"

    def get_gen_file(self):
        return "{}/test44.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 49:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00017168,
2,{},E00017185,
3,{},E00017039,
4,{},E00017244,
5,{},E00017065,
6,{},E00017171,
7,{},E00017247,
8,{},E00017186,
9,{},E00017181,
10,{},E00017172,
11,{},E00017188,
12,{},E00017261,
13,{},E00017252,
14,{},E00017067,
15,{},E00017187,
16,{},E00017179,
17,{},E00017182,
18,{},E00017191,
19,{},E00017234,
20,{},E00017176,
21,{},E00017184,
22,{},E00017170,
23,{},E00017192,
24,{},E00017177,
25,{},E00017178,
26,{},E00017246,
27,{},E00017038,
28,{},E00017190,
29,{},E00017044,
30,{},E00017237,
31,{},E00017175,
32,{},E00017194,
33,{},E00017243,
34,{},E00017232,
35,{},E00017174,
36,{},E00017063,
37,{},E00017242,
38,{},E00017058,
39,{},E00017180,
40,{},E00017245,
41,{},E00017189,
42,{},E00017169,
43,{},E00017195,
44,{},E00017064,
45,{},E00017183,
46,{},E00017173,
47,{},E00017066,
48,{},E00017059,
49,{},E00017193,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00017168","E00017185","E00017039","E00017244","E00017065","E00017171","E00017247","E00017186","E00017181","E00017172","E00017188","E00017261","E00017252","E00017067","E00017187","E00017179","E00017182","E00017191","E00017234","E00017176","E00017184","E00017170","E00017192","E00017177","E00017178","E00017246","E00017038","E00017190","E00017044","E00017237","E00017175","E00017194","E00017243","E00017232","E00017174","E00017063","E00017242","E00017058","E00017180","E00017245","E00017189","E00017169","E00017195","E00017064","E00017183","E00017173","E00017066","E00017059","E00017193"], [0.0 for i in range(0,49)], {"E00017168":"1","E00017185":"2","E00017039":"3","E00017244":"4","E00017065":"5","E00017171":"6","E00017247":"7","E00017186":"8","E00017181":"9","E00017172":"10","E00017188":"11","E00017261":"12","E00017252":"13","E00017067":"14","E00017187":"15","E00017179":"16","E00017182":"17","E00017191":"18","E00017234":"19","E00017176":"20","E00017184":"21","E00017170":"22","E00017192":"23","E00017177":"24","E00017178":"25","E00017246":"26","E00017038":"27","E00017190":"28","E00017044":"29","E00017237":"30","E00017175":"31","E00017194":"32","E00017243":"33","E00017232":"34","E00017174":"35","E00017063":"36","E00017242":"37","E00017058":"38","E00017180":"39","E00017245":"40","E00017189":"41","E00017169":"42","E00017195":"43","E00017064":"44","E00017183":"45","E00017173":"46","E00017066":"47","E00017059":"48","E00017193":"49"})
