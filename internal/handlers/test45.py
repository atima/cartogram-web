import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test45"

    def get_gen_file(self):
        return "{}/test45.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 42:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00006492,
2,{},E00006501,
3,{},E00006267,
4,{},E00006496,
5,{},E00006480,
6,{},E00006516,
7,{},E00006268,
8,{},E00006265,
9,{},E00006497,
10,{},E00006491,
11,{},E00006487,
12,{},E00006483,
13,{},E00006506,
14,{},E00006481,
15,{},E00006266,
16,{},E00006475,
17,{},E00006494,
18,{},E00006493,
19,{},E00006477,
20,{},E00006507,
21,{},E00006515,
22,{},E00166869,
23,{},E00006486,
24,{},E00006485,
25,{},E00006498,
26,{},E00006500,
27,{},E00006511,
28,{},E00006508,
29,{},E00006474,
30,{},E00006488,
31,{},E00006476,
32,{},E00006504,
33,{},E00006509,
34,{},E00006505,
35,{},E00006510,
36,{},E00006499,
37,{},E00006502,
38,{},E00006503,
39,{},E00006512,
40,{},E00006489,
41,{},E00006264,
42,{},E00006514,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00006492","E00006501","E00006267","E00006496","E00006480","E00006516","E00006268","E00006265","E00006497","E00006491","E00006487","E00006483","E00006506","E00006481","E00006266","E00006475","E00006494","E00006493","E00006477","E00006507","E00006515","E00166869","E00006486","E00006485","E00006498","E00006500","E00006511","E00006508","E00006474","E00006488","E00006476","E00006504","E00006509","E00006505","E00006510","E00006499","E00006502","E00006503","E00006512","E00006489","E00006264","E00006514"], [0.0 for i in range(0,42)], {"E00006492":"1","E00006501":"2","E00006267":"3","E00006496":"4","E00006480":"5","E00006516":"6","E00006268":"7","E00006265":"8","E00006497":"9","E00006491":"10","E00006487":"11","E00006483":"12","E00006506":"13","E00006481":"14","E00006266":"15","E00006475":"16","E00006494":"17","E00006493":"18","E00006477":"19","E00006507":"20","E00006515":"21","E00166869":"22","E00006486":"23","E00006485":"24","E00006498":"25","E00006500":"26","E00006511":"27","E00006508":"28","E00006474":"29","E00006488":"30","E00006476":"31","E00006504":"32","E00006509":"33","E00006505":"34","E00006510":"35","E00006499":"36","E00006502":"37","E00006503":"38","E00006512":"39","E00006489":"40","E00006264":"41","E00006514":"42"})
