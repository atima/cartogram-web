import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test54"

    def get_gen_file(self):
        return "{}/test54.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 51:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00017401,
2,{},E00017095,
3,{},E00017263,
4,{},E00017255,
5,{},E00017096,
6,{},E00017084,
7,{},E00017257,
8,{},E00017155,
9,{},E00017397,
10,{},E00017407,
11,{},E00017068,
12,{},E00017403,
13,{},E00017410,
14,{},E00017088,
15,{},E00017398,
16,{},E00017072,
17,{},E00017073,
18,{},E00017406,
19,{},E00017154,
20,{},E00017402,
21,{},E00017099,
22,{},E00017081,
23,{},E00017087,
24,{},E00017100,
25,{},E00017404,
26,{},E00017089,
27,{},E00017383,
28,{},E00017393,
29,{},E00017260,
30,{},E00017082,
31,{},E00017386,
32,{},E00017090,
33,{},E00017092,
34,{},E00017235,
35,{},E00017097,
36,{},E00017071,
37,{},E00017101,
38,{},E00017075,
39,{},E00017094,
40,{},E00017098,
41,{},E00017409,
42,{},E00017411,
43,{},E00017085,
44,{},E00017070,
45,{},E00017240,
46,{},E00017149,
47,{},E00017405,
48,{},E00017400,
49,{},E00017091,
50,{},E00017158,
51,{},E00017156,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00017401","E00017095","E00017263","E00017255","E00017096","E00017084","E00017257","E00017155","E00017397","E00017407","E00017068","E00017403","E00017410","E00017088","E00017398","E00017072","E00017073","E00017406","E00017154","E00017402","E00017099","E00017081","E00017087","E00017100","E00017404","E00017089","E00017383","E00017393","E00017260","E00017082","E00017386","E00017090","E00017092","E00017235","E00017097","E00017071","E00017101","E00017075","E00017094","E00017098","E00017409","E00017411","E00017085","E00017070","E00017240","E00017149","E00017405","E00017400","E00017091","E00017158","E00017156"], [0.0 for i in range(0,51)], {"E00017401":"1","E00017095":"2","E00017263":"3","E00017255":"4","E00017096":"5","E00017084":"6","E00017257":"7","E00017155":"8","E00017397":"9","E00017407":"10","E00017068":"11","E00017403":"12","E00017410":"13","E00017088":"14","E00017398":"15","E00017072":"16","E00017073":"17","E00017406":"18","E00017154":"19","E00017402":"20","E00017099":"21","E00017081":"22","E00017087":"23","E00017100":"24","E00017404":"25","E00017089":"26","E00017383":"27","E00017393":"28","E00017260":"29","E00017082":"30","E00017386":"31","E00017090":"32","E00017092":"33","E00017235":"34","E00017097":"35","E00017071":"36","E00017101":"37","E00017075":"38","E00017094":"39","E00017098":"40","E00017409":"41","E00017411":"42","E00017085":"43","E00017070":"44","E00017240":"45","E00017149":"46","E00017405":"47","E00017400":"48","E00017091":"49","E00017158":"50","E00017156":"51"})
