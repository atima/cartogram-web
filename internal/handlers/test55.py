import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test55"

    def get_gen_file(self):
        return "{}/test55.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 51:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00020768,
2,{},E00020782,
3,{},E00021090,
4,{},E00020756,
5,{},E00020765,
6,{},E00020764,
7,{},E00021082,
8,{},E00021080,
9,{},E00166826,
10,{},E00020766,
11,{},E00021092,
12,{},E00021091,
13,{},E00020784,
14,{},E00020772,
15,{},E00021072,
16,{},E00021076,
17,{},E00020781,
18,{},E00021085,
19,{},E00021086,
20,{},E00020753,
21,{},E00020759,
22,{},E00021087,
23,{},E00020780,
24,{},E00020785,
25,{},E00020761,
26,{},E00020757,
27,{},E00020754,
28,{},E00020760,
29,{},E00020778,
30,{},E00020758,
31,{},E00020786,
32,{},E00021089,
33,{},E00020755,
34,{},E00020783,
35,{},E00021074,
36,{},E00021081,
37,{},E00021075,
38,{},E00021096,
39,{},E00021083,
40,{},E00021095,
41,{},E00020773,
42,{},E00020775,
43,{},E00020767,
44,{},E00020779,
45,{},E00166819,
46,{},E00020774,
47,{},E00021093,
48,{},E00020769,
49,{},E00021084,
50,{},E00021088,
51,{},E00021071,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00020768","E00020782","E00021090","E00020756","E00020765","E00020764","E00021082","E00021080","E00166826","E00020766","E00021092","E00021091","E00020784","E00020772","E00021072","E00021076","E00020781","E00021085","E00021086","E00020753","E00020759","E00021087","E00020780","E00020785","E00020761","E00020757","E00020754","E00020760","E00020778","E00020758","E00020786","E00021089","E00020755","E00020783","E00021074","E00021081","E00021075","E00021096","E00021083","E00021095","E00020773","E00020775","E00020767","E00020779","E00166819","E00020774","E00021093","E00020769","E00021084","E00021088","E00021071"], [0.0 for i in range(0,51)], {"E00020768":"1","E00020782":"2","E00021090":"3","E00020756":"4","E00020765":"5","E00020764":"6","E00021082":"7","E00021080":"8","E00166826":"9","E00020766":"10","E00021092":"11","E00021091":"12","E00020784":"13","E00020772":"14","E00021072":"15","E00021076":"16","E00020781":"17","E00021085":"18","E00021086":"19","E00020753":"20","E00020759":"21","E00021087":"22","E00020780":"23","E00020785":"24","E00020761":"25","E00020757":"26","E00020754":"27","E00020760":"28","E00020778":"29","E00020758":"30","E00020786":"31","E00021089":"32","E00020755":"33","E00020783":"34","E00021074":"35","E00021081":"36","E00021075":"37","E00021096":"38","E00021083":"39","E00021095":"40","E00020773":"41","E00020775":"42","E00020767":"43","E00020779":"44","E00166819":"45","E00020774":"46","E00021093":"47","E00020769":"48","E00021084":"49","E00021088":"50","E00021071":"51"})
