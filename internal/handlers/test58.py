import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test58"

    def get_gen_file(self):
        return "{}/test58.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 57:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00007071,
2,{},E00007540,
3,{},E00007568,
4,{},E00007553,
5,{},E00007036,
6,{},E00007550,
7,{},E00007551,
8,{},E00007575,
9,{},E00007047,
10,{},E00007571,
11,{},E00007565,
12,{},E00171178,
13,{},E00007564,
14,{},E00007557,
15,{},E00007552,
16,{},E00007045,
17,{},E00007046,
18,{},E00007573,
19,{},E00007543,
20,{},E00171481,
21,{},E00007544,
22,{},E00007561,
23,{},E00007546,
24,{},E00007554,
25,{},E00007560,
26,{},E00007043,
27,{},E00007041,
28,{},E00007034,
29,{},E00007549,
30,{},E00007070,
31,{},E00007547,
32,{},E00171180,
33,{},E00007559,
34,{},E00007048,
35,{},E00007576,
36,{},E00007044,
37,{},E00007542,
38,{},E00007059,
39,{},E00007555,
40,{},E00007049,
41,{},E00007037,
42,{},E00007569,
43,{},E00007073,
44,{},E00007545,
45,{},E00007040,
46,{},E00007042,
47,{},E00007558,
48,{},E00007577,
49,{},E00007539,
50,{},E00007541,
51,{},E00007563,
52,{},E00007562,
53,{},E00007570,
54,{},E00007548,
55,{},E00007572,
56,{},E00007566,
57,{},E00007556,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00007071","E00007540","E00007568","E00007553","E00007036","E00007550","E00007551","E00007575","E00007047","E00007571","E00007565","E00171178","E00007564","E00007557","E00007552","E00007045","E00007046","E00007573","E00007543","E00171481","E00007544","E00007561","E00007546","E00007554","E00007560","E00007043","E00007041","E00007034","E00007549","E00007070","E00007547","E00171180","E00007559","E00007048","E00007576","E00007044","E00007542","E00007059","E00007555","E00007049","E00007037","E00007569","E00007073","E00007545","E00007040","E00007042","E00007558","E00007577","E00007539","E00007541","E00007563","E00007562","E00007570","E00007548","E00007572","E00007566","E00007556"], [0.0 for i in range(0,57)], {"E00007071":"1","E00007540":"2","E00007568":"3","E00007553":"4","E00007036":"5","E00007550":"6","E00007551":"7","E00007575":"8","E00007047":"9","E00007571":"10","E00007565":"11","E00171178":"12","E00007564":"13","E00007557":"14","E00007552":"15","E00007045":"16","E00007046":"17","E00007573":"18","E00007543":"19","E00171481":"20","E00007544":"21","E00007561":"22","E00007546":"23","E00007554":"24","E00007560":"25","E00007043":"26","E00007041":"27","E00007034":"28","E00007549":"29","E00007070":"30","E00007547":"31","E00171180":"32","E00007559":"33","E00007048":"34","E00007576":"35","E00007044":"36","E00007542":"37","E00007059":"38","E00007555":"39","E00007049":"40","E00007037":"41","E00007569":"42","E00007073":"43","E00007545":"44","E00007040":"45","E00007042":"46","E00007558":"47","E00007577":"48","E00007539":"49","E00007541":"50","E00007563":"51","E00007562":"52","E00007570":"53","E00007548":"54","E00007572":"55","E00007566":"56","E00007556":"57"})
