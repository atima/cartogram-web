import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test06-Train"

    def get_gen_file(self):
        return "{}/test6.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 49:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00006615,
2,{},E00006603,
3,{},E00006601,
4,{},E00006606,
5,{},E00006286,
6,{},E00006627,
7,{},E00006639,
8,{},E00006294,
9,{},E00006637,
10,{},E00006628,
11,{},E00006604,
12,{},E00006638,
13,{},E00006619,
14,{},E00006620,
15,{},E00006618,
16,{},E00006626,
17,{},E00006611,
18,{},E00006602,
19,{},E00006621,
20,{},E00006636,
21,{},E00006292,
22,{},E00006635,
23,{},E00006640,
24,{},E00006630,
25,{},E00006614,
26,{},E00006631,
27,{},E00006623,
28,{},E00006625,
29,{},E00006633,
30,{},E00006600,
31,{},E00006624,
32,{},E00006616,
33,{},E00006608,
34,{},E00006632,
35,{},E00006283,
36,{},E00006634,
37,{},E00006610,
38,{},E00006598,
39,{},E00006613,
40,{},E00006622,
41,{},E00006599,
42,{},E00006282,
43,{},E00006612,
44,{},E00006607,
45,{},E00006617,
46,{},E00006609,
47,{},E00006629,
48,{},E00006605,
49,{},E00006597,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00006615","E00006603","E00006601","E00006606","E00006286","E00006627","E00006639","E00006294","E00006637","E00006628","E00006604","E00006638","E00006619","E00006620","E00006618","E00006626","E00006611","E00006602","E00006621","E00006636","E00006292","E00006635","E00006640","E00006630","E00006614","E00006631","E00006623","E00006625","E00006633","E00006600","E00006624","E00006616","E00006608","E00006632","E00006283","E00006634","E00006610","E00006598","E00006613","E00006622","E00006599","E00006282","E00006612","E00006607","E00006617","E00006609","E00006629","E00006605","E00006597"], [0.0 for i in range(0,49)], {"E00006615":"1","E00006603":"2","E00006601":"3","E00006606":"4","E00006286":"5","E00006627":"6","E00006639":"7","E00006294":"8","E00006637":"9","E00006628":"10","E00006604":"11","E00006638":"12","E00006619":"13","E00006620":"14","E00006618":"15","E00006626":"16","E00006611":"17","E00006602":"18","E00006621":"19","E00006636":"20","E00006292":"21","E00006635":"22","E00006640":"23","E00006630":"24","E00006614":"25","E00006631":"26","E00006623":"27","E00006625":"28","E00006633":"29","E00006600":"30","E00006624":"31","E00006616":"32","E00006608":"33","E00006632":"34","E00006283":"35","E00006634":"36","E00006610":"37","E00006598":"38","E00006613":"39","E00006622":"40","E00006599":"41","E00006282":"42","E00006612":"43","E00006607":"44","E00006617":"45","E00006609":"46","E00006629":"47","E00006605":"48","E00006597":"49"})
