import settings
import handlers.base_handler
import csv

class CartogramHandler(handlers.base_handler.BaseCartogramHandler):

    def get_name(self):
        return "test64"

    def get_gen_file(self):
        return "{}/test64.geojson".format(settings.CARTOGRAM_DATA_DIR)
    
    def validate_values(self, values):

        if len(values) != 55:
            return False
        
        for v in values:
            if type(v) != float:
                return False

        return True
    
    def gen_area_data(self, values):
        return """cartogram_id,Region Data,Region Name,Inset
1,{},E00007707,
2,{},E00007691,
3,{},E00007177,
4,{},E00007693,
5,{},E00007168,
6,{},E00007172,
7,{},E00007182,
8,{},E00007187,
9,{},E00007668,
10,{},E00007675,
11,{},E00171183,
12,{},E00007170,
13,{},E00007180,
14,{},E00007695,
15,{},E00171172,
16,{},E00007674,
17,{},E00171150,
18,{},E00007207,
19,{},E00007179,
20,{},E00007173,
21,{},E00007171,
22,{},E00171169,
23,{},E00007689,
24,{},E00007200,
25,{},E00007183,
26,{},E00007698,
27,{},E00007690,
28,{},E00007670,
29,{},E00007192,
30,{},E00007686,
31,{},E00007676,
32,{},E00007186,
33,{},E00007175,
34,{},E00007176,
35,{},E00007706,
36,{},E00007203,
37,{},E00007174,
38,{},E00007201,
39,{},E00007703,
40,{},E00007700,
41,{},E00007705,
42,{},E00171177,
43,{},E00007669,
44,{},E00007191,
45,{},E00007167,
46,{},E00007189,
47,{},E00007673,
48,{},E00007677,
49,{},E00007184,
50,{},E00171149,
51,{},E00007181,
52,{},E00007185,
53,{},E00007204,
54,{},E00007188,
55,{},E00171170,""".format(*values)
    
    def expect_geojson_output(self):
        return True

    def csv_to_area_string_and_colors(self, csvfile):

        return self.order_by_example(csv.reader(csvfile), "Region", 0, 1, 2, 3, ["E00007707","E00007691","E00007177","E00007693","E00007168","E00007172","E00007182","E00007187","E00007668","E00007675","E00171183","E00007170","E00007180","E00007695","E00171172","E00007674","E00171150","E00007207","E00007179","E00007173","E00007171","E00171169","E00007689","E00007200","E00007183","E00007698","E00007690","E00007670","E00007192","E00007686","E00007676","E00007186","E00007175","E00007176","E00007706","E00007203","E00007174","E00007201","E00007703","E00007700","E00007705","E00171177","E00007669","E00007191","E00007167","E00007189","E00007673","E00007677","E00007184","E00171149","E00007181","E00007185","E00007204","E00007188","E00171170"], [0.0 for i in range(0,55)], {"E00007707":"1","E00007691":"2","E00007177":"3","E00007693":"4","E00007168":"5","E00007172":"6","E00007182":"7","E00007187":"8","E00007668":"9","E00007675":"10","E00171183":"11","E00007170":"12","E00007180":"13","E00007695":"14","E00171172":"15","E00007674":"16","E00171150":"17","E00007207":"18","E00007179":"19","E00007173":"20","E00007171":"21","E00171169":"22","E00007689":"23","E00007200":"24","E00007183":"25","E00007698":"26","E00007690":"27","E00007670":"28","E00007192":"29","E00007686":"30","E00007676":"31","E00007186":"32","E00007175":"33","E00007176":"34","E00007706":"35","E00007203":"36","E00007174":"37","E00007201":"38","E00007703":"39","E00007700":"40","E00007705":"41","E00171177":"42","E00007669":"43","E00007191":"44","E00007167":"45","E00007189":"46","E00007673":"47","E00007677":"48","E00007184":"49","E00171149":"50","E00007181":"51","E00007185":"52","E00007204":"53","E00007188":"54","E00171170":"55"})
